CREATE TABLE CIDADE(
CID_COD INT NOT NULL,
CID_NOME VARCHAR (100) NOT NULL,
CONSTRAINT PK_CID_COD PRIMARY KEY(CID_COD)
);

CREATE TABLE CLIENTE(
CLI_ID INT NOT NULL,
CLI_NOME VARCHAR (150) NOT NULL,
CLI_CPF VARCHAR (14) NOT NULL,
CLI_TELEFONE INT NOT NULL,
CLI_EMAIL VARCHAR (100),
CLI_CIDCOD INT NOT NULL,
CONSTRAINT PK_CLIENTEID PRIMARY KEY(CLI_ID),
CONSTRAINT FK_CLIENTECIDADE FOREIGN KEY(CLI_CIDCOD) REFERENCES CIDADE(CID_COD)
);

CREATE TABLE FUNCIONARIO(
FUNC_ID INT NOT NULL,
FUNC_NOME VARCHAR(150) NOT NULL,
FUNC_CPF VARCHAR(14) NOT NULL, 
FUNC_TELEFONE INT NOT NULL,
FUNC_CIDCOD INT NOT NULL,
CONSTRAINT PK_FUNCIONARIO PRIMARY KEY(FUNC_ID),
CONSTRAINT FK_FUNCIONARIOCIDADE FOREIGN KEY(FUNC_CIDCOD) REFERENCES CIDADE(CID_COD)
);

CREATE TABLE MARCA(
MARC_COD INT NOT NULL,
MARC_MARCA VARCHAR(100) NOT NULL,
CONSTRAINT PK_MARCA PRIMARY KEY(MARC_COD)
);

CREATE TABLE MODELO(
MOD_COD INT NOT NULL,
MOD_MODELO VARCHAR(100) NOT NULL,
MOD_MARCCOD INT NOT NULL,
CONSTRAINT PK_MODELO PRIMARY KEY(MOD_COD),
CONSTRAINT FK_MARCAMODELO FOREIGN KEY(MOD_MARCCOD) REFERENCES MARCA(MARC_COD)
);

CREATE TABLE CARRO(
CAR_PLACA VARCHAR(7) NOT NULL,
CAR_ANOFABRIC INT NOT NULL,
CAR_MODCOD INT NOT NULL,
CAR_CLIID INT NOT NULL,
CONSTRAINT PK_CARRO PRIMARY KEY(CAR_PLACA),
CONSTRAINT FK_CARROMODELO FOREIGN KEY(CAR_MODCOD) REFERENCES MODELO(MOD_COD),
CONSTRAINT FK_CARROCLIENTE FOREIGN KEY(CAR_CLIID) REFERENCES CLIENTE(CLI_ID)
);

CREATE TABLE PECA(
PECA_COD INT NOT NULL,
PECA_QUANTIDADE INT NOT NULL,
PECA_LADO VARCHAR(1),
CONSTRAINT PK_PECA PRIMARY KEY(PECA_COD)
);

CREATE TABLE SERVICO(
SERV_COD INT NOT NULL,
SERV_TIPO VARCHAR(50) NOT NULL,
CONSTRAINT PK_SERVICO PRIMARY KEY(SERV_COD)
);

CREATE TABLE ATENDIMENTO(
ATEND_COD INT NOT NULL,
ATEND_KM VARCHAR(6) NOT NULL,
ATEND_SERVCOD INT NOT NULL,
ATEND_CARPLACA VARCHAR(7) NOT NULL,
CONSTRAINT PK_ATENDIMENTO PRIMARY KEY(ATEND_COD),
CONSTRAINT FK_ATENDIMENTOSERVICO FOREIGN KEY(ATEND_SERVCOD) REFERENCES SERVICO(SERV_COD),
CONSTRAINT FK_ATENDIMENTOCARRO FOREIGN KEY(ATEND_CARPLACA) REFERENCES CARRO(CAR_PLACA)
);


CREATE TABLE ATENDIMENTOXPECA(
ATENDXPECA INT NOT NULL,
ATENDXCOD INT NOT NULL,
ATENDXPECACOD INT NOT NULL,
CONSTRAINT PK_RELACIONAMENTOPECA PRIMARY KEY(ATENDXPECA),
CONSTRAINT FK_ATENDIMENTOPECA FOREIGN KEY(ATENDXCOD) REFERENCES ATENDIMENTO(ATEND_COD),
CONSTRAINT FK_PECAATENDIMENTO FOREIGN KEY(ATENDXPECACOD) REFERENCES PECA(PECA_COD)
);


CREATE TABLE ATENDIMENTOXFUNCIONARIO(
ATENDXFUNC INT NOT NULL,
ATENDXCOD INT NOT NULL,
ATENDXFUNCID INT NOT NULL,
CONSTRAINT PK_ATENDIMENTOFUNC PRIMARY KEY(ATENDXFUNC),
CONSTRAINT FK_ATENDIMENTOFUNC FOREIGN KEY(ATENDXCOD) REFERENCES ATENDIMENTO(ATEND_COD),
CONSTRAINT FK_FUNCATENDIMENTO FOREIGN KEY (ATENDXFUNCID) REFERENCES FUNCIONARIO(FUNC_ID)
);
 

CREATE SEQUENCE CIDADE_SEQ
START WITH 1
INCREMENT BY 1;

CREATE SEQUENCE CLIENTE_SEQ
START WITH 1
INCREMENT BY 1;

CREATE SEQUENCE FUNCIONARIO_SEQ
START WITH 1
INCREMENT BY 1;

CREATE SEQUENCE MARCA_SEQ
START WITH 1
INCREMENT BY 1;

CREATE SEQUENCE MODELO_SEQ
START WITH 1
INCREMENT BY 1;

CREATE SEQUENCE CARRO_SEQ
START WITH 1
INCREMENT BY 1;

CREATE SEQUENCE SERVICO_SEQ
START WITH 1
INCREMENT BY 1;

CREATE SEQUENCE PECA_SEQ
START WITH 1
INCREMENT BY 1;

CREATE SEQUENCE ATENDIMENTO_SEQ
START WITH 1
INCREMENT BY 1;

CREATE SEQUENCE RELACIONAMENTOPECA_SEQ
START WITH 1
INCREMENT BY 1;

CREATE SEQUENCE RELACIONAMENTOFUNC_SEQ
START WITH 1
INCREMENT BY 1;
